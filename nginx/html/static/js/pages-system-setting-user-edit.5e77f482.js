(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-system-setting-user-edit"],{1046:function(e,t,r){var a=r("aafe");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=r("4f06").default;n("1dc04016",a,!0,{sourceMap:!1,shadowMode:!1})},"13d4":function(e,t,r){"use strict";(function(e){var a=r("4ea4");r("b64b"),r("d3b7"),r("e25e"),r("25f0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("15df"),i=a(r("542f")),s=a(r("27f5")),u={data:function(){var e={};return{permissionArray:[],curArray:[],formData:e,rules:{}}},onLoad:function(e){var t=e.id;this.getPermissionArray(),this.getDetail(t)},onReady:function(){},methods:{getPermissionArray:function(){var e=this;s.default.getPermissionList().then((function(t){if(200==t.code&&t.data){for(var r=t.data,a=0;a<r.length;a++)e.permissionArray.push({name:r[a].permissionName,value:r[a].permissionId.toString()});e.selJob=""}}))},checkboxChange:function(e){this.curArray=e.detail.value},submitForm:function(){this.$refs.form.submit()},submit:function(t){var r=this,a=t.detail,n=(a.value,a.errors);if(!n){if(uni.showLoading({title:"修改中...",mask:!0}),this.formData.permissionids=[],this.curArray.length>0)for(var s=0;s<this.curArray.length;s++)this.formData.permissionids.push(parseInt(this.curArray[s]));void 0!==this.formData.userPwd&&""==this.formData.userPwd&&(this.formData.userPwd=null),i.default.editUser(this.formData).then((function(t){e("log","edituser",r.formData,t," at pages/system/setting/user/edit.vue:133"),200==t.code&&"SUCCESS"==t.data&&(r.getOpenerEventChannel().emit("refreshData"),uni.navigateBack()),uni.hideLoading()})).catch((function(e){uni.hideLoading()}))}},getDetail:function(e){var t=this;uni.showLoading({mask:!0});var r={userid:e};i.default.getUserInfo(r).then((function(e){if(200==e.code&&e.data){t.formData=e.data,t.rules=(0,n.getValidator)(Object.keys(t.formData),"M"),t.$refs.form.setRules(t.rules);for(var r=0;r<t.formData.permissionids.length;r++)t.curArray.push(t.formData.permissionids[r].toString())}})),uni.hideLoading()}}};t.default=u}).call(this,r("0de9")["log"])},"15df":function(e,t,r){"use strict";r("caad"),r("2532"),Object.defineProperty(t,"__esModule",{value:!0}),t.getValidator=i;var a={userName:{rules:[{required:!0},{format:"string"}],label:"姓名"},userIdnum:{rules:[{required:!0},{format:"string"},{minLength:18,maxLength:18,errorMessage:"身份证号为18位"}],label:"身份证号"},userEmail:{rules:[{required:!0,errorMessage:"请输入邮箱地址"},{format:"email",errorMessage:"请输入正确的邮箱地址"}]},userPwd:{rules:[{required:!0,errorMessage:"请输入密码"},{format:"string"},{minLength:8,errorMessage:"最少8个字符"}]}},n={userName:{rules:[{required:!0},{format:"string"}],label:"姓名"},userIdnum:{rules:[{required:!0},{format:"string"},{minLength:18,maxLength:18,errorMessage:"身份证号为18位"}],label:"身份证号"},userEmail:{rules:[{required:!0,errorMessage:"请输入邮箱地址"},{format:"email",errorMessage:"请输入正确的邮箱地址"}]},userPwd:{rules:[{format:"string"},{minLength:8,errorMessage:"为空或最少8个字符"}]}};function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"A",r={};if("A"==t)for(var i in a)e.includes(i)&&(r[i]=a[i]);else if("M"==t)for(var s in n)r[s]=n[s];return r}},"27f5":function(e,t,r){"use strict";var a=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r("ef47")),i={getPermissionList:function(){return(0,n.default)({url:"/permissionDO/v1/sys/queryAllPermission",method:"GET"})}};t.default=i},"6b6b":function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return a}));var a={uniForms:r("3a5d").default,uniRow:r("e014").default,uniCol:r("9654").default,uniFormsItem:r("700d").default},n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",{staticClass:"uni-container"},[r("uni-forms",{ref:"form",attrs:{validateTrigger:"bind"},on:{submit:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},[r("uni-row",[r("uni-col",{attrs:{span:12}},[r("uni-forms-item",{attrs:{name:"userName",label:"姓名",required:!0}},[r("v-uni-input",{staticClass:"uni-search",attrs:{type:"text",placeholder:"姓名"},model:{value:e.formData.userName,callback:function(t){e.$set(e.formData,"userName",t)},expression:"formData.userName"}})],1)],1)],1),r("uni-row",[r("uni-col",{attrs:{span:12}},[r("uni-forms-item",{attrs:{name:"userIdnum",label:"身份证号",required:!0}},[r("v-uni-input",{staticClass:"uni-search",attrs:{type:"text",placeholder:"身份证号"},model:{value:e.formData.userIdnum,callback:function(t){e.$set(e.formData,"userIdnum",t)},expression:"formData.userIdnum"}})],1)],1)],1),r("uni-row",[r("uni-col",{attrs:{span:12}},[r("uni-forms-item",{attrs:{name:"userEmail",label:"邮箱",required:!0}},[r("v-uni-input",{staticClass:"uni-search",attrs:{type:"text",placeholder:"邮箱"},model:{value:e.formData.userEmail,callback:function(t){e.$set(e.formData,"userEmail",t)},expression:"formData.userEmail"}})],1)],1)],1),r("uni-row",[r("uni-col",{attrs:{span:12}},[r("uni-forms-item",{attrs:{name:"userPwd",label:"密码"}},[r("v-uni-input",{staticClass:"uni-search",attrs:{password:!0,type:"text",placeholder:"密码"},model:{value:e.formData.userPwd,callback:function(t){e.$set(e.formData,"userPwd",t)},expression:"formData.userPwd"}})],1)],1)],1),r("v-uni-view",{staticClass:"spliter"}),r("v-uni-view",{staticClass:"uni-title"},[r("v-uni-text",[e._v("TA的权限")])],1),r("uni-row",[r("uni-col",{attrs:{span:24}},[r("uni-forms-item",{attrs:{name:""}},[r("v-uni-checkbox-group",{on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.checkboxChange.apply(void 0,arguments)}}},e._l(e.permissionArray,(function(t){return r("v-uni-label",{key:t.value,staticClass:"cbox"},[r("v-uni-checkbox",{attrs:{value:t.value,checked:e.curArray.indexOf(t.value)>-1}}),r("v-uni-text",[e._v(e._s(t.name))])],1)})),1)],1)],1)],1),r("v-uni-view",{staticClass:"uni-button-group"},[r("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submitForm.apply(void 0,arguments)}}},[e._v("提交")])],1)],1)],1)},i=[]},"94a6":function(e,t,r){"use strict";r.r(t);var a=r("6b6b"),n=r("ab2a");for(var i in n)"default"!==i&&function(e){r.d(t,e,(function(){return n[e]}))}(i);r("c4f2");var s,u=r("f0c5"),o=Object(u["a"])(n["default"],a["b"],a["c"],!1,null,"53c1b6f2",null,!1,a["a"],s);t["default"]=o.exports},aafe:function(e,t,r){var a=r("24fb");t=a(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.cbox[data-v-53c1b6f2]{margin-left:20px}.uni-app--showleftwindow .uni-container .uni-forms[data-v-53c1b6f2]{width:80%;max-width:800px}.uni-title[data-v-53c1b6f2]{padding:5px;margin-bottom:10px;font-weight:700;color:grey}.spliter[data-v-53c1b6f2]{width:100%;height:1px;background-color:#d3d3d3;margin-bottom:10px}',""]),e.exports=t},ab2a:function(e,t,r){"use strict";r.r(t);var a=r("13d4"),n=r.n(a);for(var i in a)"default"!==i&&function(e){r.d(t,e,(function(){return a[e]}))}(i);t["default"]=n.a},c4f2:function(e,t,r){"use strict";var a=r("1046"),n=r.n(a);n.a}}]);